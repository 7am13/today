<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í†µí•© ê´€ë¦¬ ì‹œìŠ¤í…œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f7f9fb; }
        .custom-scroll::-webkit-scrollbar { width: 6px; }
        .custom-scroll::-webkit-scrollbar-thumb { background-color: #9ca3af; border-radius: 3px; }
        .custom-scroll::-webkit-scrollbar-track { background-color: #e5e7eb; }
    </style>
</head>
<body class="min-h-screen p-4 sm:p-8">

    <div id="app" class="max-w-4xl mx-auto bg-white shadow-2xl rounded-xl overflow-hidden">
        
        <header class="p-6 bg-[#002FA7] text-white shadow-lg">
            <h1 class="text-3xl font-bold mb-1">í†µí•© ê´€ë¦¬ ì‹œìŠ¤í…œ ğŸŒ¿</h1>
            <p class="text-blue-100 text-sm">ì¼ì •, í•  ì¼, ì‹ë‹¨, ì…€í”„ ì¼€ì–´, ì½˜í…ì¸  í•œ ê³³ì—ì„œ ê´€ë¦¬</p>
            <div id="user-info" class="mt-2 text-xs opacity-80">
                ì¸ì¦ ì¤‘...
            </div>
        </header>

        <nav id="tabs" class="flex border-b border-blue-100 bg-blue-50">
            <button data-tab="todo" class="tab-button w-1/5 py-3 px-2 text-center text-xs sm:text-sm font-semibold transition-colors duration-200 border-b-4 border-transparent hover:bg-blue-100" onclick="switchTab('todo')">
                âœ… íˆ¬ë‘
            </button>
            <button data-tab="schedule" class="tab-button w-1/5 py-3 px-2 text-center text-xs sm:text-sm font-semibold transition-colors duration-200 border-b-4 border-transparent hover:bg-blue-100" onclick="switchTab('schedule')">
                ğŸ“… ì¼ì •
            </button>
            <button data-tab="meal-plan" class="tab-button w-1/5 py-3 px-2 text-center text-xs sm:text-sm font-semibold transition-colors duration-200 border-b-4 border-transparent hover:bg-blue-100" onclick="switchTab('meal-plan')">
                ğŸ½ï¸ ì‹ë‹¨
            </button>
            <button data-tab="self-care" class="tab-button w-1/5 py-3 px-2 text-center text-xs sm:text-sm font-semibold transition-colors duration-200 border-b-4 border-transparent hover:bg-blue-100" onclick="switchTab('self-care')">
                âœ¨ ì…€í”„ì¼€ì–´
            </button>
            <button data-tab="content-log" class="tab-button w-1/5 py-3 px-2 text-center text-xs sm:text-sm font-semibold transition-colors duration-200 border-b-4 border-transparent hover:bg-blue-100" onclick="switchTab('content-log')">
                ğŸ“š ì½˜í…ì¸ 
            </button>
        </nav>

        <main class="p-6">
            
            <div id="todo-tab" class="tab-content hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4">âœ… ì˜¤ëŠ˜ì˜ í•  ì¼</h2>
                <form id="add-todo-form" class="flex gap-2 mb-6">
                    <div class="flex-grow relative">
                        <input type="text" id="todo-input" placeholder="ìƒˆë¡œìš´ í•  ì¼ì„ ì…ë ¥í•˜ì„¸ìš” (ë§ˆì´í¬ ì•„ì´ì½˜ í´ë¦­)" required class="w-full p-3 border border-gray-300 rounded-lg pr-12 focus:ring-blue-500 focus:border-blue-500 transition duration-150">
                        <button type="button" id="voice-input-btn" class="absolute inset-y-0 right-0 flex items-center pr-3 text-gray-500 hover:text-blue-600 transition duration-150" title="ìŒì„± ì¸ì‹ìœ¼ë¡œ ì…ë ¥">
                            <svg id="mic-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6"><rect width="4" height="12" x="10" y="2" rx="2"/><path d="M12 18v4"/><path d="M21 10V8"/><path d="M3 10V8"/><path d="M19 10c0 3.9-3.1 7-7 7s-7-3.1-7-7"/></svg>
                        </button>
                    </div>
                    <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-600 transition duration-150 shadow-md">ì¶”ê°€</button>
                </form>

                <div id="voice-status" class="mb-4 text-center text-sm text-blue-600 hidden p-2 bg-blue-50 rounded-lg">
                    ë§ì”€í•˜ì„¸ìš”. ë“£ê³  ìˆìŠµë‹ˆë‹¤...
                </div>
                
                <div id="todo-list" class="space-y-3 custom-scroll max-h-96 overflow-y-auto pr-2">
                    <p class="text-gray-500 text-center py-4">í•  ì¼ì„ ë¡œë“œ ì¤‘ì…ë‹ˆë‹¤...</p>
                </div>
            </div>

            <div id="schedule-tab" class="tab-content hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4">ğŸ“… ì˜¤ëŠ˜ì˜ ì¼ì •</h2>
                
                <div class="flex flex-col sm:flex-row justify-between items-center gap-4 mb-6 p-4 bg-blue-50 rounded-lg shadow-inner">
                    <input type="date" id="schedule-date-picker" class="p-3 border border-blue-300 rounded-lg text-lg font-medium focus:ring-blue-500 focus:border-blue-500 transition duration-150">
                    <p class="text-blue-700 font-bold" id="selected-schedule-date-display"></p>
                </div>

                <form id="add-schedule-form" class="grid grid-cols-1 sm:grid-cols-4 gap-3 mb-6 p-4 border border-gray-200 rounded-lg">
                    <input type="time" id="schedule-time" required class="p-2 border border-gray-300 rounded-lg col-span-1">
                    <input type="text" id="schedule-desc" placeholder="ì¼ì • ë‚´ìš©" required class="p-2 border border-gray-300 rounded-lg col-span-2">
                    <button type="submit" class="bg-green-500 text-white py-2 rounded-lg font-semibold hover:bg-green-600 transition duration-150 col-span-1">ì¼ì • ì¶”ê°€</button>
                </form>
                
                <div id="schedule-list" class="space-y-3 custom-scroll max-h-96 overflow-y-auto pr-2">
                    <p class="text-gray-500 text-center py-4">ì¼ì •ì„ ë¡œë“œ ì¤‘ì…ë‹ˆë‹¤...</p>
                </div>
            </div>

            <div id="meal-plan-tab" class="tab-content hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4">ğŸ½ï¸ ì‹ë‹¨ ê¸°ë¡</h2>

                <div class="flex flex-col sm:flex-row justify-between items-center gap-4 mb-6 p-4 bg-blue-50 rounded-lg shadow-inner">
                    <input type="date" id="meal-date-picker" class="p-3 border border-blue-300 rounded-lg text-lg font-medium focus:ring-blue-500 focus:border-blue-500 transition duration-150">
                    <p class="text-blue-700 font-bold" id="selected-meal-date-display"></p>
                </div>

                <form id="add-meal-form" class="grid grid-cols-1 sm:grid-cols-5 gap-3 mb-6 p-4 border border-gray-200 rounded-lg">
                    <select id="meal-type" required class="p-2 border border-gray-300 rounded-lg col-span-1">
                        <option value="Breakfast">ì•„ì¹¨</option>
                        <option value="Lunch">ì ì‹¬</option>
                        <option value="Dinner">ì €ë…</option>
                        <option value="Snack">ê°„ì‹</option>
                    </select>
                    <input type="text" id="food-item" placeholder="ìŒì‹ëª…" required class="p-2 border border-gray-300 rounded-lg col-span-2">
                    <input type="number" id="calories" placeholder="ì¹¼ë¡œë¦¬ (ì„ íƒ)" min="0" class="p-2 border border-gray-300 rounded-lg col-span-1">
                    <button type="submit" class="bg-rose-500 text-white py-2 rounded-lg font-semibold hover:bg-rose-600 transition duration-150 col-span-1">ê¸°ë¡</button>
                </form>

                <div id="meal-summary" class="bg-white p-4 rounded-lg shadow-md mb-4 border border-rose-100">
                    <h3 class="text-xl font-semibold mb-2 text-rose-700">ğŸ—“ï¸ ì´ ì¹¼ë¡œë¦¬: <span id="total-calories" class="font-bold text-2xl">0</span> kcal</h3>
                    <p class="text-sm text-gray-600">ì„ íƒëœ ë‚ ì§œì˜ ì´ ì¹¼ë¡œë¦¬ í•©ì‚°ì…ë‹ˆë‹¤.</p>
                </div>

                <div id="meal-list" class="space-y-3 custom-scroll max-h-96 overflow-y-auto pr-2">
                    <p class="text-gray-500 text-center py-4">ì‹ë‹¨ ê¸°ë¡ì„ ë¡œë“œ ì¤‘ì…ë‹ˆë‹¤...</p>
                </div>
            </div>
            
            <div id="self-care-tab" class="tab-content hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4">âœ¨ ì…€í”„ ì¼€ì–´ ê¸°ë¡</h2>

                <div class="flex flex-col sm:flex-row justify-between items-center gap-4 mb-6 p-4 bg-blue-50 rounded-lg shadow-inner">
                    <input type="date" id="self-care-date-picker" class="p-3 border border-blue-300 rounded-lg text-lg font-medium focus:ring-blue-500 focus:border-blue-500 transition duration-150">
                    <p class="text-blue-700 font-bold" id="selected-self-care-date-display"></p>
                </div>

                <form id="add-self-care-form" class="grid grid-cols-1 sm:grid-cols-4 gap-3 mb-6 p-4 border border-gray-200 rounded-lg">
                    <select id="care-type" required class="p-2 border border-gray-300 rounded-lg col-span-1">
                        <option value="Skin">í”¼ë¶€ (Skin)</option>
                        <option value="BodyShape">ëª¸ë§¤ (Body)</option>
                        <option value="Exercise">ìš´ë™ (Exercise)</option>
                    </select>
                    <input type="text" id="care-detail" placeholder="ê¸°ë¡ ë‚´ìš© (ex: íŒ©, ëˆˆë°”ë””, 30ë¶„ ë‹¬ë¦¬ê¸°)" required class="p-2 border border-gray-300 rounded-lg col-span-2">
                    <button type="submit" class="bg-purple-500 text-white py-2 rounded-lg font-semibold hover:bg-purple-600 transition duration-150 col-span-1">ê¸°ë¡</button>
                </form>

                <div id="self-care-list" class="space-y-3 custom-scroll max-h-96 overflow-y-auto pr-2">
                    <p class="text-gray-500 text-center py-4">ì…€í”„ ì¼€ì–´ ê¸°ë¡ì„ ë¡œë“œ ì¤‘ì…ë‹ˆë‹¤...</p>
                </div>
            </div>

            <div id="content-log-tab" class="tab-content hidden">
                <h2 class="text-2xl font-semibold text-gray-800 mb-4">ğŸ“š ì½˜í…ì¸  ê¸°ë¡</h2>

                <div class="flex flex-col sm:flex-row justify-between items-center gap-4 mb-6 p-4 bg-blue-50 rounded-lg shadow-inner">
                    <input type="date" id="content-log-date-picker" class="p-3 border border-blue-300 rounded-lg text-lg font-medium focus:ring-blue-500 focus:border-blue-500 transition duration-150">
                    <p class="text-blue-700 font-bold" id="selected-content-log-date-display"></p>
                </div>

                <form id="add-content-log-form" class="grid grid-cols-1 sm:grid-cols-5 gap-3 mb-6 p-4 border border-gray-200 rounded-lg">
                    <select id="content-type" required class="p-2 border border-gray-300 rounded-lg col-span-1">
                        <option value="Blog">ğŸ“ ë¸”ë¡œê·¸</option>
                        <option value="YouTube">ğŸ“º ìœ íŠœë¸Œ</option>
                        <option value="Drama">ğŸ¬ ë“œë¼ë§ˆ</option>
                        <option value="Movie">ğŸ¿ ì˜í™”</option>
                        <option value="Book">ğŸ“š ì±…</option>
                        <option value="Music">ğŸµ ìŒì•…</option>
                        <option value="Art">ğŸ–¼ï¸ ì•„íŠ¸</option>
                        <option value="Other">ğŸ“ ê¸°íƒ€</option>
                    </select>
                    <input type="text" id="content-title" placeholder="ì œëª©/ì´ë¦„" required class="p-2 border border-gray-300 rounded-lg col-span-2">
                    <input type="text" id="content-note" placeholder="ê°„ë‹¨ ë©”ëª¨/ëŠë‚€ ì " class="p-2 border border-gray-300 rounded-lg col-span-1">
                    <button type="submit" class="bg-sky-500 text-white py-2 rounded-lg font-semibold hover:bg-sky-600 transition duration-150 col-span-1">ê¸°ë¡</button>
                </form>

                <div id="content-log-list" class="space-y-3 custom-scroll max-h-96 overflow-y-auto pr-2">
                    <p class="text-gray-500 text-center py-4">ì½˜í…ì¸  ê¸°ë¡ì„ ë¡œë“œ ì¤‘ì…ë‹ˆë‹¤...</p>
                </div>
            </div>

        </main>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, doc, updateDoc, deleteDoc, onSnapshot, query, where, setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // ===================================================================
        // â­ Firebase ì›¹ ì•± ì„¤ì • (ì‚¬ìš©ìê°€ ì œê³µí•œ ì‹¤ì œ ê°’ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë¨)
        // ===================================================================
        const firebaseConfig = {
            apiKey: "AIzaSyBWKfL8rucrbpkQJKiPpU6t0iqz2by0yyE",
            authDomain: "today-82c3c.firebaseapp.com",
            projectId: "today-82c3c",
            messagingSenderId: "480041913808",
            appId: "1:480041913808:web:3dc1e6a3a454ccc04c3dd5"
        };
        // ===================================================================

        const appId = firebaseConfig.projectId || 'default-app-id';

        let app, db, auth;
        let userId = null;
        let isAuthReady = false;
        let listenersStarted = false; // ë¦¬ìŠ¤ë„ˆê°€ ì´ë¯¸ ì‹œì‘ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” í”Œë˜ê·¸
        let currentTab = 'todo';

        let selectedScheduleDate = formatDate(new Date()); 
        let selectedMealDate = formatDate(new Date());
        let selectedSelfCareDate = formatDate(new Date());
        let selectedContentLogDate = formatDate(new Date());

        function formatDate(date) {
            const y = date.getFullYear();
            const m = String(date.getMonth() + 1).padStart(2, '0');
            const d = String(date.getDate()).padStart(2, '0');
            return `${y}-${m}-${d}`;
        }

        /**
         * í™”ë©´ ì˜¤ë¥¸ìª½ í•˜ë‹¨ì— ìƒíƒœ ë©”ì‹œì§€ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.
         */
        function showStatusMessage(message, type = 'success') {
            const statusDiv = document.createElement('div');
            statusDiv.className = `fixed bottom-4 right-4 p-4 rounded-lg shadow-xl text-white z-50 transition-transform transform translate-x-full duration-300`;
            if (type === 'success') {
                statusDiv.classList.add('bg-green-600', 'font-semibold');
            } else if (type === 'error') {
                statusDiv.classList.add('bg-red-600', 'font-semibold');
            } else if (type === 'info') {
                statusDiv.classList.add('bg-blue-600');
            }
            statusDiv.textContent = message;
            document.body.appendChild(statusDiv);

            // ë“±ì¥ ì• ë‹ˆë©”ì´ì…˜
            requestAnimationFrame(() => {
                statusDiv.classList.remove('translate-x-full');
            });

            // ì‚¬ë¼ì§€ëŠ” ì• ë‹ˆë©”ì´ì…˜
            setTimeout(() => {
                statusDiv.classList.add('translate-x-full');
                statusDiv.addEventListener('transitionend', () => statusDiv.remove());
            }, 3000);
        }

        if (firebaseConfig.apiKey && firebaseConfig.projectId && firebaseConfig.appId) {
            app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            auth = getAuth(app);
            setLogLevel('Debug');

            onAuthStateChanged(auth, async (user) => {
                const userInfoDiv = document.getElementById('user-info');
                if (user) {
                    userId = user.uid;
                    userInfoDiv.innerHTML = `ğŸ‘¤ ì‚¬ìš©ì ID: <span class="font-mono text-xs bg-black/30 p-1 rounded">${userId}</span>`;
                    isAuthReady = true;
                    startRealtimeListeners();
                } else {
                    userInfoDiv.textContent = 'ë¡œê·¸ì¸ ì¤‘... (ìµëª…)';
                    try {
                        await signInAnonymously(auth);
                    } catch (error) {
                        console.error("Firebase ì¸ì¦ ì‹¤íŒ¨:", error);
                        // ì¸ì¦ ì‹¤íŒ¨ ì‹œ, ì‚¬ìš©ìì—ê²Œ ì˜¤ë¥˜ë¥¼ ëª…í™•í•˜ê²Œ í‘œì‹œí•©ë‹ˆë‹¤.
                        if (error.code === 'auth/operation-not-allowed') {
                            userInfoDiv.innerHTML = 'ì¸ì¦ ì˜¤ë¥˜: âš ï¸ **ìµëª… ì¸ì¦ì„ í™œì„±í™”** í•´ì£¼ì„¸ìš”.';
                        } else {
                            userInfoDiv.textContent = `ì¸ì¦ ì˜¤ë¥˜ ë°œìƒ! (ì½”ë“œ: ${error.code})`;
                        }
                    }
                }
            });
        } else {
            console.error("Firebase ì„¤ì •ì´ ë¶ˆì™„ì „í•©ë‹ˆë‹¤. config ê°ì²´ë¥¼ ì±„ì›Œì£¼ì„¸ìš”.");
            document.getElementById('user-info').textContent = 'âš ï¸ Firebase ì„¤ì • ì˜¤ë¥˜: configë¥¼ ì±„ì›Œì£¼ì„¸ìš”.';
        }

        function getCollectionRef(collectionName) {
            const path = `artifacts/${appId}/users/${userId}/${collectionName}`;
            return collection(db, path);
        }

        function switchTab(tabId) {
            currentTab = tabId;
            document.querySelectorAll('.tab-content').forEach(el => el.classList.add('hidden'));
            document.getElementById(`${tabId}-tab`).classList.remove('hidden');

            document.querySelectorAll('.tab-button').forEach(el => {
                el.classList.remove('bg-white', 'text-blue-600', 'border-blue-500');
                el.classList.add('text-gray-600');
            });

            const activeBtn = document.querySelector(`.tab-button[data-tab="${tabId}"]`);
            activeBtn.classList.remove('text-gray-600');
            activeBtn.classList.add('bg-white', 'text-blue-600', 'border-blue-500');

            if (tabId === 'schedule') updateScheduleDateDisplay();
            if (tabId === 'meal-plan') updateMealDateDisplay();
            if (tabId === 'self-care') updateSelfCareDateDisplay();
            if (tabId === 'content-log') updateContentLogDateDisplay();
        }

        window.onload = () => {
            switchTab(currentTab);
            document.getElementById('schedule-date-picker').value = selectedScheduleDate;
            document.getElementById('meal-date-picker').value = selectedMealDate;
            document.getElementById('self-care-date-picker').value = selectedSelfCareDate;
            document.getElementById('content-log-date-picker').value = selectedContentLogDate;
        };

        let scheduleUnsubscribe, mealPlanUnsubscribe, selfCareUnsubscribe, contentLogUnsubscribe;

        function startRealtimeListeners() {
            if (listenersStarted || !isAuthReady || !userId) return;
            listenersStarted = true;

            // Todo List Listener (ë‚ ì§œ í•„í„° ì—†ìŒ)
            onSnapshot(getCollectionRef('todos'), (snapshot) => {
                const todos = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }))
                                          .sort((a, b) => a.createdAt.toDate() - b.createdAt.toDate());
                renderTodos(todos);
            }, (error) => { console.error("Todo List ë¦¬ìŠ¤ë„ˆ ì˜¤ë¥˜:", error); });

            // ë‚ ì§œ í•„í„°ê°€ ìˆëŠ” íƒ­ë“¤ì€ í˜„ì¬ ì„ íƒëœ ë‚ ì§œë¡œ ë¦¬ìŠ¤ë„ˆë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
            setupScheduleListener();
            setupMealPlanListener();
            setupSelfCareListener();
            setupContentLogListener();
        }

        // === Todo List Logic ===

        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        const voiceInputBtn = document.getElementById('voice-input-btn');
        const todoInput = document.getElementById('todo-input');
        const voiceStatus = document.getElementById('voice-status');
        const micIcon = document.getElementById('mic-icon');
        let recognition;
        let isRecognizing = false;

        if (SpeechRecognition) {
            recognition = new SpeechRecognition();
            recognition.lang = 'ko-KR';
            recognition.interimResults = false;
            recognition.maxAlternatives = 1;

            recognition.onstart = () => {
                isRecognizing = true;
                voiceStatus.classList.remove('hidden');
                micIcon.classList.add('text-red-500', 'animate-pulse');
                todoInput.placeholder = "ë§ì”€í•˜ì„¸ìš”...";
            };
            recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript;
                todoInput.value = todoInput.value + transcript + ' ';
            };
            recognition.onerror = (event) => {
                console.error('Speech recognition error:', event.error);
                voiceStatus.textContent = `ì˜¤ë¥˜ ë°œìƒ: ${event.error}. ë§ˆì´í¬ ê¶Œí•œì„ í™•ì¸í•˜ì„¸ìš”.`;
                voiceStatus.classList.add('text-red-500');
            };
            recognition.onend = () => {
                isRecognizing = false;
                voiceStatus.classList.add('hidden');
                voiceStatus.classList.remove('text-red-500');
                voiceStatus.textContent = "ë§ì”€í•˜ì„¸ìš”. ë“£ê³  ìˆìŠµë‹ˆë‹¤...";
                micIcon.classList.remove('text-red-500', 'animate-pulse');
                todoInput.placeholder = "ìƒˆë¡œìš´ í•  ì¼ì„ ì…ë ¥í•˜ì„¸ìš” (ë§ˆì´í¬ ì•„ì´ì½˜ í´ë¦­)";
                todoInput.focus();
                const len = todoInput.value.length;
                todoInput.setSelectionRange(len, len);
            };

            voiceInputBtn.addEventListener('click', () => {
                if (isRecognizing) {
                    recognition.stop();
                } else {
                    try {
                        recognition.start();
                    } catch (e) {
                        console.error("ì¸ì‹ ì‹œì‘ ì‹¤íŒ¨:", e);
                        voiceStatus.textContent = "ìŒì„± ì¸ì‹ ì‹œì‘ ì‹¤íŒ¨. ë¸Œë¼ìš°ì € ì§€ì› ì—¬ë¶€ë¥¼ í™•ì¸í•˜ì„¸ìš”.";
                        voiceStatus.classList.remove('hidden');
                        voiceStatus.classList.add('text-red-500');
                    }
                }
            });
        } else {
            voiceInputBtn.disabled = true;
            micIcon.classList.add('text-gray-300');
            document.getElementById('voice-status').classList.remove('hidden');
            document.getElementById('voice-status').textContent = "âš ï¸ ì´ ë¸Œë¼ìš°ì €ëŠ” ìŒì„± ì…ë ¥ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. (Chrome ê¶Œì¥)";
            document.getElementById('voice-status').classList.add('text-red-500');
        }


        document.getElementById('add-todo-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const title = todoInput.value.trim();
            if (title === "") return;

            try {
                await addDoc(getCollectionRef('todos'), {
                    title: title,
                    completed: false,
                    createdAt: new Date(),
                });
                todoInput.value = '';
                showStatusMessage('âœ… í•  ì¼ ì €ì¥ ì„±ê³µ!');
            } catch (error) {
                console.error("í•  ì¼ ì¶”ê°€ ì‹¤íŒ¨:", error);
                showStatusMessage('âŒ í•  ì¼ ì €ì¥ ì‹¤íŒ¨: ê¶Œí•œ ë¬¸ì œì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', 'error');
            }
        });

        async function toggleTodo(id, currentStatus) {
            try {
                await updateDoc(doc(getCollectionRef('todos'), id), { completed: !currentStatus });
            } catch (error) {
                console.error("í•  ì¼ ìƒíƒœ ë³€ê²½ ì‹¤íŒ¨:", error);
                showStatusMessage('âŒ ìƒíƒœ ë³€ê²½ ì‹¤íŒ¨: ê¶Œí•œ ë¬¸ì œì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', 'error');
            }
        }

        async function deleteTodo(id) {
            try {
                await deleteDoc(doc(getCollectionRef('todos'), id));
                showStatusMessage('ğŸ—‘ï¸ í•  ì¼ ì‚­ì œ ì™„ë£Œ.');
            } catch (error) {
                console.error("í•  ì¼ ì‚­ì œ ì‹¤íŒ¨:", error);
                showStatusMessage('âŒ ì‚­ì œ ì‹¤íŒ¨: ê¶Œí•œ ë¬¸ì œì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', 'error');
            }
        }

        function renderTodos(todos) {
            const listEl = document.getElementById('todo-list');
            listEl.innerHTML = ''; 

            if (todos.length === 0) {
                listEl.innerHTML = `<p class="text-gray-500 text-center py-4 p-4 bg-gray-50 rounded-lg">ì•„ì§ í•  ì¼ì´ ì—†ìŠµë‹ˆë‹¤. ìƒˆë¡œìš´ í•  ì¼ì„ ì¶”ê°€í•˜ì„¸ìš”!</p>`;
                return;
            }

            todos.forEach(todo => {
                const isCompleted = todo.completed;
                const item = document.createElement('div');
                item.className = `flex items-center justify-between p-4 rounded-lg shadow-sm border ${isCompleted ? 'bg-green-50 border-green-300' : 'bg-white border-gray-200'} hover:shadow-md transition duration-150`;

                item.innerHTML = `
                    <div class="flex items-center flex-grow cursor-pointer" onclick="toggleTodo('${todo.id}', ${isCompleted})">
                        <input type="checkbox" ${isCompleted ? 'checked' : ''} class="h-5 w-5 text-blue-600 rounded border-gray-300 focus:ring-blue-500 mr-4 pointer-events-none">
                        <span class="text-gray-800 ${isCompleted ? 'line-through text-gray-500' : 'font-medium'} break-words">
                            ${todo.title}
                        </span>
                    </div>
                    <button class="text-red-400 hover:text-red-600 transition duration-150 p-1 ml-4" onclick="deleteTodo('${todo.id}')">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                        </svg>
                    </button>
                `;
                listEl.appendChild(item);
            });
        }
        
        // === Schedule Logic ===

        function setupScheduleListener() {
            if (scheduleUnsubscribe) scheduleUnsubscribe();
            if (!isAuthReady || !userId) return;

            const q = query(getCollectionRef('schedules'), where('date', '==', selectedScheduleDate));
            scheduleUnsubscribe = onSnapshot(q, (snapshot) => {
                const schedules = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }))
                                            .sort((a, b) => a.time.localeCompare(b.time));
                renderSchedules(schedules);
            }, (error) => { console.error("Schedule ë¦¬ìŠ¤ë„ˆ ì˜¤ë¥˜:", error); });
            updateScheduleDateDisplay();
        }

        function updateScheduleDateDisplay() {
            document.getElementById('selected-schedule-date-display').textContent = `${selectedScheduleDate}ì˜ ì¼ì •`;
        }

        document.getElementById('schedule-date-picker').addEventListener('change', (e) => {
            selectedScheduleDate = e.target.value;
            setupScheduleListener();
        });

        document.getElementById('add-schedule-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const time = document.getElementById('schedule-time').value;
            const description = document.getElementById('schedule-desc').value;

            if (!time || !description) return;

            try {
                await addDoc(getCollectionRef('schedules'), {
                    date: selectedScheduleDate,
                    time,
                    description,
                    createdAt: new Date(),
                });
                document.getElementById('schedule-desc').value = '';
                showStatusMessage('âœ… ì¼ì • ì €ì¥ ì„±ê³µ!');
            } catch (error) {
                console.error("ì¼ì • ì¶”ê°€ ì‹¤íŒ¨:", error);
                showStatusMessage('âŒ ì¼ì • ì €ì¥ ì‹¤íŒ¨: ê¶Œí•œ ë¬¸ì œì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', 'error');
            }
        });

        async function deleteSchedule(id) {
            try {
                await deleteDoc(doc(getCollectionRef('schedules'), id));
                showStatusMessage('ğŸ—‘ï¸ ì¼ì • ì‚­ì œ ì™„ë£Œ.');
            } catch (error) {
                console.error("ì¼ì • ì‚­ì œ ì‹¤íŒ¨:", error);
                showStatusMessage('âŒ ì‚­ì œ ì‹¤íŒ¨: ê¶Œí•œ ë¬¸ì œì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', 'error');
            }
        }

        function renderSchedules(schedules) {
            const listEl = document.getElementById('schedule-list');
            listEl.innerHTML = '';

            if (schedules.length === 0) {
                listEl.innerHTML = `<p class="text-gray-500 text-center py-4 p-4 bg-gray-50 rounded-lg">ì„ íƒëœ ë‚ ì§œì— ì¼ì •ì´ ì—†ìŠµë‹ˆë‹¤. ìƒˆë¡œìš´ ì¼ì •ì„ ì¶”ê°€í•˜ì„¸ìš”.</p>`;
                return;
            }

            schedules.forEach(schedule => {
                const item = document.createElement('div');
                item.className = 'flex justify-between items-center p-4 bg-white border border-l-4 border-green-500 rounded-lg shadow-sm hover:shadow-md transition duration-150';
                item.innerHTML = `
                    <div class="flex-grow">
                        <p class="text-sm font-bold text-green-600 mb-1">${schedule.time}</p>
                        <p class="text-gray-800">${schedule.description}</p>
                    </div>
                    <button class="text-red-500 hover:text-red-700 transition duration-150 p-1" onclick="deleteSchedule('${schedule.id}')">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                        </svg>
                    </button>
                `;
                listEl.appendChild(item);
            });
        }
        
        // === Meal Plan Logic ===

        function setupMealPlanListener() {
            if (mealPlanUnsubscribe) mealPlanUnsubscribe();
            if (!isAuthReady || !userId) return;

            const q = query(getCollectionRef('meal_plans'), where('date', '==', selectedMealDate));
            mealPlanUnsubscribe = onSnapshot(q, (snapshot) => {
                const mealPlans = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }))
                                            .sort((a, b) => a.createdAt.toDate() - b.createdAt.toDate());
                renderMealPlans(mealPlans);
            }, (error) => { console.error("Meal Plan ë¦¬ìŠ¤ë„ˆ ì˜¤ë¥˜:", error); });
            updateMealDateDisplay();
        }

        function updateMealDateDisplay() {
            document.getElementById('selected-meal-date-display').textContent = `${selectedMealDate}ì˜ ì‹ë‹¨ ê¸°ë¡`;
        }

        document.getElementById('meal-date-picker').addEventListener('change', (e) => {
            selectedMealDate = e.target.value;
            setupMealPlanListener();
        });
        
        document.getElementById('add-meal-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const mealType = document.getElementById('meal-type').value;
            const foodItem = document.getElementById('food-item').value;
            const calories = parseInt(document.getElementById('calories').value) || 0;

            if (!mealType || !foodItem) return;

            try {
                await addDoc(getCollectionRef('meal_plans'), {
                    date: selectedMealDate,
                    mealType,
                    foodItem,
                    calories,
                    createdAt: new Date(),
                });
                document.getElementById('food-item').value = '';
                document.getElementById('calories').value = '';
                showStatusMessage('âœ… ì‹ë‹¨ ê¸°ë¡ ì €ì¥ ì„±ê³µ!');
            } catch (error) {
                console.error("ì‹ë‹¨ ê¸°ë¡ ì‹¤íŒ¨:", error);
                showStatusMessage('âŒ ì‹ë‹¨ ê¸°ë¡ ì €ì¥ ì‹¤íŒ¨: ê¶Œí•œ ë¬¸ì œì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', 'error');
            }
        });

        async function deleteMealPlan(id) {
            try {
                await deleteDoc(doc(getCollectionRef('meal_plans'), id));
                showStatusMessage('ğŸ—‘ï¸ ì‹ë‹¨ ê¸°ë¡ ì‚­ì œ ì™„ë£Œ.');
            } catch (error) {
                console.error("ì‹ë‹¨ ê¸°ë¡ ì‚­ì œ ì‹¤íŒ¨:", error);
                showStatusMessage('âŒ ì‚­ì œ ì‹¤íŒ¨: ê¶Œí•œ ë¬¸ì œì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', 'error');
            }
        }

        function getMealTypeLabel(type) {
            const map = { 'Breakfast': 'ì•„ì¹¨', 'Lunch': 'ì ì‹¬', 'Dinner': 'ì €ë…', 'Snack': 'ê°„ì‹/ê¸°íƒ€' };
            return map[type] || type;
        }

        function renderMealPlans(mealPlans) {
            const listEl = document.getElementById('meal-list');
            const totalCaloriesEl = document.getElementById('total-calories');
            listEl.innerHTML = '';
            let totalCalories = 0;

            if (mealPlans.length === 0) {
                listEl.innerHTML = `<p class="text-gray-500 text-center py-4 p-4 bg-gray-50 rounded-lg">ì„ íƒëœ ë‚ ì§œì— ì‹ë‹¨ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>`;
            } else {
                mealPlans.forEach(meal => {
                    totalCalories += meal.calories || 0;

                    const item = document.createElement('div');
                    item.className = 'flex justify-between items-center p-4 bg-white border border-l-4 border-rose-500 rounded-lg shadow-sm hover:shadow-md transition duration-150';
                    item.innerHTML = `
                        <div class="flex-grow">
                            <span class="inline-block px-2 py-1 text-xs font-semibold rounded-full bg-rose-100 text-rose-700">${getMealTypeLabel(meal.mealType)}</span>
                            <p class="text-gray-800 mt-1"><span class="font-bold">${meal.foodItem}</span></p>
                        </div>
                        <div class="text-right">
                            <p class="text-lg font-bold text-rose-600">${meal.calories} <span class="text-sm font-normal">kcal</span></p>
                            <button class="text-red-500 hover:text-red-700 transition duration-150 p-1 mt-1" onclick="deleteMealPlan('${meal.id}')">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 inline" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                                </svg> ì‚­ì œ
                            </button>
                        </div>
                    `;
                    listEl.appendChild(item);
                });
            }
            totalCaloriesEl.textContent = totalCalories.toLocaleString();
        }

        // === Self-Care Logic ===

        function setupSelfCareListener() {
            if (selfCareUnsubscribe) selfCareUnsubscribe();
            if (!isAuthReady || !userId) return;

            const q = query(getCollectionRef('self_care'), where('date', '==', selectedSelfCareDate));
            selfCareUnsubscribe = onSnapshot(q, (snapshot) => {
                const records = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }))
                                            .sort((a, b) => a.createdAt.toDate() - b.createdAt.toDate());
                renderSelfCare(records);
            }, (error) => { console.error("Self-Care ë¦¬ìŠ¤ë„ˆ ì˜¤ë¥˜:", error); });
            updateSelfCareDateDisplay();
        }

        function updateSelfCareDateDisplay() {
            document.getElementById('selected-self-care-date-display').textContent = `${selectedSelfCareDate}ì˜ ì…€í”„ ì¼€ì–´ ê¸°ë¡`;
        }

        document.getElementById('self-care-date-picker').addEventListener('change', (e) => {
            selectedSelfCareDate = e.target.value;
            setupSelfCareListener();
        });

        document.getElementById('add-self-care-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const type = document.getElementById('care-type').value;
            const detail = document.getElementById('care-detail').value;

            if (!type || !detail) return;

            try {
                await addDoc(getCollectionRef('self_care'), {
                    date: selectedSelfCareDate,
                    type,
                    detail,
                    createdAt: new Date(),
                });
                document.getElementById('care-detail').value = '';
                showStatusMessage('âœ… ì…€í”„ ì¼€ì–´ ê¸°ë¡ ì €ì¥ ì„±ê³µ!');
            } catch (error) {
                console.error("ì…€í”„ ì¼€ì–´ ê¸°ë¡ ì‹¤íŒ¨:", error);
                showStatusMessage('âŒ ì…€í”„ ì¼€ì–´ ê¸°ë¡ ì €ì¥ ì‹¤íŒ¨: ê¶Œí•œ ë¬¸ì œì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', 'error');
            }
        });

        async function deleteSelfCare(id) {
            try {
                await deleteDoc(doc(getCollectionRef('self_care'), id));
                showStatusMessage('ğŸ—‘ï¸ ì…€í”„ ì¼€ì–´ ê¸°ë¡ ì‚­ì œ ì™„ë£Œ.');
            } catch (error) {
                console.error("ì…€í”„ ì¼€ì–´ ê¸°ë¡ ì‚­ì œ ì‹¤íŒ¨:", error);
                showStatusMessage('âŒ ì‚­ì œ ì‹¤íŒ¨: ê¶Œí•œ ë¬¸ì œì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', 'error');
            }
        }

        function getCareTypeLabel(type) {
            const map = { 'Skin': 'í”¼ë¶€', 'BodyShape': 'ëª¸ë§¤', 'Exercise': 'ìš´ë™' };
            return map[type] || type;
        }

        function getCareTypeColor(type) {
            const map = {
                'Skin': 'border-blue-400 bg-blue-50',
                'BodyShape': 'border-pink-400 bg-pink-50',
                'Exercise': 'border-yellow-400 bg-yellow-50',
            };
            return map[type] || 'border-gray-400 bg-gray-50';
        }

        function renderSelfCare(records) {
            const listEl = document.getElementById('self-care-list');
            listEl.innerHTML = '';

            if (records.length === 0) {
                listEl.innerHTML = `<p class="text-gray-500 text-center py-4 p-4 bg-gray-50 rounded-lg">ì„ íƒëœ ë‚ ì§œì— ì…€í”„ ì¼€ì–´ ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>`;
                return;
            }

            records.forEach(record => {
                const item = document.createElement('div');
                item.className = `flex justify-between items-center p-4 rounded-lg shadow-sm border-l-4 ${getCareTypeColor(record.type)} hover:shadow-md transition duration-150`;
                item.innerHTML = `
                    <div class="flex-grow">
                        <span class="inline-block px-2 py-1 text-xs font-semibold rounded-full text-gray-700 bg-white/50">${getCareTypeLabel(record.type)}</span>
                        <p class="text-gray-800 mt-1 font-medium">${record.detail}</p>
                    </div>
                    <button class="text-red-500 hover:text-red-700 transition duration-150 p-1" onclick="deleteSelfCare('${record.id}')">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                        </svg>
                    </button>
                `;
                listEl.appendChild(item);
            });
        }

        // === Content Log Logic ===

        function setupContentLogListener() {
            if (contentLogUnsubscribe) contentLogUnsubscribe();
            if (!isAuthReady || !userId) return;

            const q = query(getCollectionRef('content_log'), where('date', '==', selectedContentLogDate));
            contentLogUnsubscribe = onSnapshot(q, (snapshot) => {
                const records = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }))
                                            .sort((a, b) => a.createdAt.toDate() - b.createdAt.toDate());
                renderContentLog(records);
            }, (error) => { console.error("Content Log ë¦¬ìŠ¤ë„ˆ ì˜¤ë¥˜:", error); });
            updateContentLogDateDisplay();
        }

        function updateContentLogDateDisplay() {
            document.getElementById('selected-content-log-date-display').textContent = `${selectedContentLogDate}ì˜ ì½˜í…ì¸  ê¸°ë¡`;
        }

        document.getElementById('content-log-date-picker').addEventListener('change', (e) => {
            selectedContentLogDate = e.target.value;
            setupContentLogListener();
        });

        document.getElementById('add-content-log-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const type = document.getElementById('content-type').value;
            const title = document.getElementById('content-title').value;
            const note = document.getElementById('content-note').value;

            if (!type || !title) return;

            try {
                await addDoc(getCollectionRef('content_log'), {
                    date: selectedContentLogDate,
                    type,
                    title,
                    note,
                    createdAt: new Date(),
                });
                document.getElementById('content-title').value = '';
                document.getElementById('content-note').value = '';
                showStatusMessage('âœ… ì½˜í…ì¸  ê¸°ë¡ ì €ì¥ ì„±ê³µ!');
            } catch (error) {
                console.error("ì½˜í…ì¸  ê¸°ë¡ ì‹¤íŒ¨:", error);
                showStatusMessage('âŒ ì½˜í…ì¸  ê¸°ë¡ ì €ì¥ ì‹¤íŒ¨: ê¶Œí•œ ë¬¸ì œì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', 'error');
            }
        });

        async function deleteContentLog(id) {
            try {
                await deleteDoc(doc(getCollectionRef('content_log'), id));
                showStatusMessage('ğŸ—‘ï¸ ì½˜í…ì¸  ê¸°ë¡ ì‚­ì œ ì™„ë£Œ.');
            } catch (error) {
                console.error("ì½˜í…ì¸  ê¸°ë¡ ì‚­ì œ ì‹¤íŒ¨:", error);
                showStatusMessage('âŒ ì‚­ì œ ì‹¤íŒ¨: ê¶Œí•œ ë¬¸ì œì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', 'error');
            }
        }

        function getContentIcon(type) {
            const map = { 'Blog': 'ğŸ“', 'YouTube': 'ğŸ“º', 'Movie': 'ğŸï¸', 'Book': 'ğŸ“š', 'Music': 'ğŸµ', 'Art': 'ğŸ–¼ï¸', 'Other': 'ğŸ”—' };
            return map[type] || 'ğŸ”—';
        }

        function getContentColor(type) {
            const map = {
                'Blog': 'border-sky-500 bg-sky-50',
                'YouTube': 'border-red-500 bg-red-50',
                'Movie': 'border-gray-800 bg-gray-100',
                'Book': 'border-amber-500 bg-amber-50',
                'Music': 'border-fuchsia-500 bg-fuchsia-50',
                'Art': 'border-teal-500 bg-teal-50',
                'Other': 'border-blue-500 bg-blue-50',
            };
            return map[type] || 'border-gray-300 bg-white';
        }

        function renderContentLog(records) {
            const listEl = document.getElementById('content-log-list');
            listEl.innerHTML = '';

            if (records.length === 0) {
                listEl.innerHTML = `<p class="text-gray-500 text-center py-4 p-4 bg-gray-50 rounded-lg">ì„ íƒëœ ë‚ ì§œì— ì½˜í…ì¸  ê¸°ë¡ì´ ì—†ìŠµë‹ˆë‹¤.</p>`;
                return;
            }

            records.forEach(record => {
                const item = document.createElement('div');
                item.className = `flex justify-between items-center p-4 rounded-lg shadow-sm border-l-4 ${getContentColor(record.type)} hover:shadow-md transition duration-150`;
                item.innerHTML = `
                    <div class="flex-grow">
                        <p class="text-sm font-bold text-gray-700 flex items-center mb-1">
                            <span class="mr-2">${getContentIcon(record.type)}</span> ${record.type}
                        </p>
                        <p class="text-gray-900 text-lg font-semibold">${record.title}</p>
                        ${record.note ? `<p class="text-gray-600 text-sm mt-1">"${record.note}"</p>` : ''}
                    </div>
                    <button class="text-red-500 hover:text-red-700 transition duration-150 p-1" onclick="deleteContentLog('${record.id}')">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd" />
                        </svg>
                    </button>
                `;
                listEl.appendChild(item);
            });
        }

        window.switchTab = switchTab;
        window.toggleTodo = toggleTodo;
        window.deleteTodo = deleteTodo;
        window.deleteSchedule = deleteSchedule;
        window.deleteMealPlan = deleteMealPlan;
        window.deleteSelfCare = deleteSelfCare;
        window.deleteContentLog = deleteContentLog;

    </script>
</body>
</html>
